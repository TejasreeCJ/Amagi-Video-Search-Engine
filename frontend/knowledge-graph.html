<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knowledge Graph - Video Mind Map</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="graph-styles.css">
    <!-- Vis.js Network Library -->
    <script type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
</head>
<body>
    <div class="graph-container">
        <header class="graph-header">
            <div class="header-content">
                <button onclick="goBack()" class="back-button">‚Üê Back to Search</button>
                <h1>üß† Knowledge Graph - Video Mind Map</h1>
                <p class="subtitle" id="videoTitle">Analyzing video structure...</p>
                <div id="serverNotice" class="server-notice" style="display: none;">
                    ‚ö†Ô∏è For video playback to work, please serve this page via HTTP server (not file://)
                    <button onclick="dismissNotice()" class="dismiss-btn">√ó</button>
                </div>
            </div>
        </header>

        <div class="main-layout">
            <!-- Sidebar with controls and video info -->
            <aside class="sidebar">
                <div class="control-panel">
                    <h3>Video Input</h3>
                    <div class="input-group">
                        <input 
                            type="text" 
                            id="videoUrlInput" 
                            placeholder="Enter YouTube video URL"
                            autocomplete="off"
                        >
                        <input 
                            type="number" 
                            id="minDurationInput" 
                            placeholder="Min clip duration (sec)"
                            value="30"
                            min="10"
                            step="5"
                        >
                        <button onclick="generateGraph()" id="generateBtn" class="primary-btn">
                            Generate Graph
                        </button>
                    </div>

                    <div id="loadingIndicator" class="loading-section" style="display: none;">
                        <div class="spinner"></div>
                        <p>Analyzing video and creating knowledge graph...</p>
                        <small>This may take a few moments</small>
                    </div>

                    <div id="videoInfo" class="video-info" style="display: none;">
                        <h3>Video Information</h3>
                        <img id="thumbnail" src="" alt="Video thumbnail" class="thumbnail">
                        <h4 id="infoTitle"></h4>
                        <p><strong>Duration:</strong> <span id="infoDuration"></span></p>
                        <p><strong>Total Clips:</strong> <span id="infoClips"></span></p>
                    </div>

                    <div class="legend">
                        <h3>Legend</h3>
                        <div class="legend-item">
                            <div class="legend-color sequential"></div>
                            <span>Sequential Flow</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color related"></div>
                            <span>Related Topics</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-node level-0"></div>
                            <span>Introduction</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-node level-1"></div>
                            <span>Main Content</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-node level-2"></div>
                            <span>Conclusion</span>
                        </div>
                    </div>

                    <div class="graph-controls">
                        <h3>Controls</h3>
                        <button onclick="resetView()" class="control-btn">Reset View</button>
                        <button onclick="togglePhysics()" class="control-btn" id="physicsBtn">Disable Physics</button>
                        <button onclick="exportGraph()" class="control-btn">Export as Image</button>
                    </div>
                </div>
            </aside>

            <!-- Main graph visualization area -->
            <main class="graph-main">
                <div id="graphNetwork" class="network-canvas"></div>
                
                <!-- Clip details panel -->
                <div id="clipDetails" class="clip-details" style="display: none;">
                    <button onclick="closeClipDetails()" class="close-btn">√ó</button>
                    <h3 id="clipTitle"></h3>
                    <div class="clip-meta">
                        <span id="clipTime"></span>
                        <span id="clipDuration"></span>
                    </div>
                    <div class="clip-topics" id="clipTopics"></div>
                    <p id="clipText"></p>
                    <button onclick="playClip()" class="play-btn">‚ñ∂ Play This Clip</button>
                </div>
            </main>
        </div>

        <!-- Video player modal -->
        <div id="videoModal" class="modal" style="display: none;">
            <div class="modal-content">
                <button onclick="closeVideoModal()" class="modal-close">√ó</button>
                <div id="videoPlayer"></div>
            </div>
        </div>
    </div>

    <script src="knowledge-graph.js"></script>
</body>
</html>
